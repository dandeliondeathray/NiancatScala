version: '2'
services:
  niancat:
    image: erikedin/niancat:ready-for-acceptance
    environment:
      - DICTIONARY_FILE=/app/dictionary.txt
    volumes:
      - ./dictionary.txt:/app/dictionary.txt
  niancat-slack:
    image: erikedin/niancat-slack:ready-for-acceptance
    links:
      - taut:slack.com
      - niancat
    environment:
      - NIANCAT_CHAT_BASE_URL=http://niancat/v1
      - NOTIFICATION_CHANNEL=#konsulatet
      - SLACK_API_TOKEN=niancattoken
  taut:
    image: erikedin/taut
    command: /taut/bin/taut
    environment:
      - SSL_CERT=/var/cert/cert.pem
      - SSL_KEY=/var/cert/key.pem
  niancatacceptance:
    build: .
    command: behave --tags=~wip
    links:
      - taut:slack.com
    environment:
      - REQUESTS_CA_BUNDLE=/var/cert/cert.pem
      - WEBSOCKET_CLIENT_CA_BUNDLE=/var/cert/cert.pem
      - SSL_CERT_FILE=/var/cert/cert.pem
